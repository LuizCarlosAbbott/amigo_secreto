{"version":3,"sources":["components/Persons/Persons.js","components/PersonsTable/PersonsTable.js","containers/App.js","index.js"],"names":["UPDATE_PERSON","gql","Persons","props","useMutation","updatePerson","useState","rIndex","setIndex","nameChange","setName","emailChange","setEmail","data","persons","map","index","id","name","email","friend","key","className","value","onChange","e","target","onClick","style","backgroundColor","variables","input","delete","personsTable","loading","loadingSort","error","DELETE_PERSON","PERSONS","CREATE_PERSON","SORT_FRIEND","App","useQuery","update","cache","createPerson","readQuery","query","writeQuery","concat","sortFriend","deletePerson","splice","size","type","placeholder","length","PersonsTable","href","client","ApolloClient","uri","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.78f9bd6c.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { FaTrash, FaPencilAlt, FaSave } from \"react-icons/fa\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { gql } from \"apollo-boost\";\nimport \"./Persons.css\";\n\nconst UPDATE_PERSON = gql`\n  mutation updatePerson($id: String!, $input: PersonInput!) {\n    updatePerson(id: $id, input: $input) {\n      id\n      name\n      email\n    }\n  }\n`;\n\nfunction Persons(props) {\n  const [updatePerson] = useMutation(UPDATE_PERSON);\n  const [rIndex, setIndex] = useState(-1);\n  const [nameChange, setName] = useState(\"\");\n  const [emailChange, setEmail] = useState(\"\");\n\n  return props.data.persons.map(({ id, name, email, friend }, index) => {\n    return (\n      <tr key={id} id={id}>\n        <td>\n          {rIndex !== index ? (\n            name\n          ) : (\n            <input\n              className=\"Fade\"\n              value={nameChange}\n              onChange={(e) => setName(e.target.value)}\n            />\n          )}\n        </td>\n        <td>\n          {rIndex !== index ? (\n            email\n          ) : (\n            <input\n              className=\"Fade\"\n              value={emailChange}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          )}\n        </td>\n        <td>{friend}</td>\n        <td>\n          <button\n            className=\"btn btn-warning Fade\"\n            onClick={() => {\n              if (rIndex === index) {\n                setIndex(-1);\n              } else {\n                setIndex(index);\n                setName(name);\n                setEmail(email);\n              }\n            }}\n          >\n            <FaPencilAlt style={{ backgroundColor: \"#fbc118\" }} />\n          </button>\n          {rIndex === index ? (\n            <button\n              className=\"btn btn-success ml-2 Fade\"\n              onClick={() => {\n                updatePerson({\n                  variables: {\n                    id,\n                    input: { name: nameChange, email: emailChange },\n                  },\n                });\n                setIndex(-1);\n              }}\n            >\n              <FaSave style={{ backgroundColor: \"#57a845\" }} />\n            </button>\n          ) : null}\n          <button\n            className=\"btn btn-danger ml-2 Fade\"\n            onClick={() => props.delete({ variables: { id } })}\n          >\n            <FaTrash style={{ backgroundColor: \"#dd4b44\" }} />\n          </button>\n        </td>\n      </tr>\n    );\n  });\n}\n\nexport default Persons;\n","import React from \"react\";\nimport Persons from \"../Persons/Persons\";\nimport \"./PersonTable.css\";\n\nconst personsTable = (props) => {\n  if (props.loading || props.loadingSort) return <p>Loading...</p>;\n  if (props.error) return <p>Error :(</p>;\n\n  return (\n    <table className=\"PersonTable\">\n      <thead>\n        <tr>\n          <th>Nome</th>\n          <th>E-mail</th>\n          <th>Amigo</th>\n          <th>Ações</th>\n        </tr>\n      </thead>\n      <tbody>{<Persons data={props.data} delete={props.delete} />}</tbody>\n    </table>\n  );\n};\n\nexport default personsTable;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport React, { useState } from \"react\";\nimport PersonsTable from \"../components/PersonsTable/PersonsTable\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { gql } from \"apollo-boost\";\nimport { FaGifts, FaArrowRight } from \"react-icons/fa\";\nimport \"./App.css\";\n\nconst DELETE_PERSON = gql`\n  mutation deletePerson($id: String!) {\n    deletePerson(id: $id) {\n      id\n      name\n      email\n    }\n  }\n`;\n\nconst PERSONS = gql`\n  {\n    persons {\n      id\n      name\n      email\n      friend\n    }\n  }\n`;\n\nconst CREATE_PERSON = gql`\n  mutation createPerson($input: PersonInput!) {\n    createPerson(input: $input) {\n      id\n      name\n      email\n      friend\n    }\n  }\n`;\n\nconst SORT_FRIEND = gql`\n  mutation sortFriend {\n    sortFriend {\n      id\n      name\n      email\n      friend\n    }\n  }\n`;\n\nfunction App() {\n  const { loading, error, data } = useQuery(PERSONS);\n  const [createPerson] = useMutation(CREATE_PERSON, {\n    update(cache, { data: { createPerson } }) {\n      const { persons } = cache.readQuery({ query: PERSONS });\n      cache.writeQuery({\n        query: PERSONS,\n        data: { persons: persons.concat([createPerson]) },\n      });\n    },\n  });\n  const [sortFriend, { loading: loadingSort }] = useMutation(SORT_FRIEND, {\n    update(cache, { data: { sortFriend } }) {\n      cache.writeQuery({\n        query: PERSONS,\n        data: { persons: sortFriend.data.persons },\n      });\n    },\n  });\n  const [deletePerson] = useMutation(DELETE_PERSON, {\n    async update(cache, { data: { deletePerson } }) {\n      const { persons } = cache.readQuery({ query: PERSONS });\n      await persons.map((e, index) =>\n        e.id === deletePerson.id ? persons.splice(index, 1) : e\n      );\n      cache.writeQuery({\n        query: PERSONS,\n        data: { persons: persons },\n      });\n    },\n  });\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n\n  return (\n    <div className=\"Geral\">\n      <div className=\"Logo\">\n        <FaGifts size={150} className=\"icon\" />\n        <div className=\"form\">\n          <div className=\"row\">\n            <div className=\"col12 col-md-6\">\n              <div className=\"form-group\">\n                <label>Nome</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  placeholder=\"Digite o nome...\"\n                />\n              </div>\n            </div>\n\n            <div className=\"col-12 col-md-6\">\n              <div className=\"form-group\">\n                <label>E-mail</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"Digite o e-mail...\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <hr />\n          <div className=\"row\">\n            <div className=\"col-12 d-flex justify-content-end\">\n              <button\n                className=\"btn btn-primary\"\n                onClick={(e) =>\n                  createPerson({ variables: { input: { name, email } } })\n                }\n              >\n                Adicionar a lista\n              </button>\n\n              <button\n                className=\"btn btn-secondary ml-2\"\n                onClick={(e) => {\n                  setEmail(\"\");\n                  setName(\"\");\n                }}\n              >\n                Cancelar\n              </button>\n              <button\n                className=\"btn btn-success ml-2\"\n                onClick={() => {\n                  data &&\n                    data.persons &&\n                    data.persons.length > 1 &&\n                    sortFriend();\n                }}\n              >\n                Sortear e enviar email\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"App\">\n        <PersonsTable\n          data={data}\n          loading={loading}\n          loadingSort={loadingSort}\n          error={error}\n          delete={deletePerson}\n        />\n      </div>\n      <div className=\"Footer\">\n        Produzido com carinho por Luiz Carlos - para ver o código &nbsp; {\"  \"}\n        <a href=\"https://github.com/LuizCarlosAbbott/ad-2019/\">\n          {\" \"}\n          acesse\n          <FaArrowRight />\n        </a>{\" \"}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./containers/App\";\nimport ApolloClient from \"apollo-boost\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\n\nconst client = new ApolloClient({\n  uri: \"https://salty-escarpment-39557.herokuapp.com/graphql\",\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ApolloProvider client={client}>\n      <App />\n    </ApolloProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}